---
title: IMQA Web Agent 설치
description: Installation guide of `@imqa/web-agent`
nav: 2
---

## 설치

- CDN

```html
<script src="href="https://cdn.imqa.io/web-agent@0.0.1/dist/web-agent-0.0.1.min.js" type="text/javascript"></script>
```

```javascript
imqa.initialize(options)
```

- Local 환경 에이전트 설정

```javascript
<script src="./web-agent-0.0.1.min.js"></script>
```

```javascript
imqa.initialize(options)
```

- NPM

```html
npm install @imqa/web-agent
```

```javascript
import("@imqa/web-agent").then(() => {
  const { imqa } = window;
  imqa.initialize(options);
});
```

## Initialize 옵션

`initialize` 함수는 다음 옵션을 포함하는 객체를 받습니다:

### 필수 옵션

| **옵션**                | **타입**   | **설명**                                                     |
| --------------------- | -------- | ---------------------------------------------------------- |
| `collectionSourceUrl` | `string` | 수집된 데이터를 전송할 URL. `@imqa/web-agent` 를 초기화하려면 반드시 정의해야 합니다. |

### 선택적 옵션

| **옵션**                            | **타입**                   | **기본값**     | **설명**                              |
| --------------------------------- | ------------------------ | ----------- | ----------------------------------- |
| `authorizationToken`              | `string`                 | `undefined` | 데이터 전송 시 헤더에 포함될 인증 토큰.             |
| `serviceName`                     | `string`                 | `'unknown'` | 모니터링 중인 서비스의 이름.                    |
| `applicationName`                 | `string`                 | `undefined` | 모니터링 중인 애플리케이션의 이름.                 |
| `deploymentEnvironment`           | `string`                 | `undefined` | 배포 환경 (예: 'production', 'staging'). |
| `defaultAttributes`               | `api.Attributes`         | `{}`        | 모든 스팬에 추가될 기본 속성.                   |
| `samplingProbability`             | `number \| string`       | `1`         | 트레이스가 샘플링될 확률. 범위: 0에서 1 사이.        |
| `bufferMaxSpans`                  | `number`                 | `2048`      | 전송 전 버퍼링할 최대 스팬 수.                  |
| `maxExportBatchSize`              | `number`                 | `50`        | 한 번에 내보낼 최대 스팬 수.                   |
| `bufferTimeout`                   | `number`                 | `2000`      | 버퍼가 내보내질 때까지의 시간 제한 (밀리초).          |
| `ignoreUrls`                      | `(string \| RegExp)[]`   | `[]`        | 계측에서 무시할 URL들.                      |
| `propagateTraceHeaderCorsUrls`    | `(string \| RegExp)[]`   | `[]`        | CORS 요청에서 트레이스 헤더를 전파할 URL들.        |
| `collectSessionId`                | `boolean`                | `true`      | 세션 ID를 수집하고 포함할지 여부.                |
| `dropSingleUserInteractionTraces` | `boolean`                | `true`      | 단일 사용자 상호작용 스팬으로 구성된 트레이스를 버릴지 여부.  |
| `collectErrors`                   | `boolean`                | `true`      | 오류를 수집하고 보고할지 여부.                   |
| `userInteractionElementNameLimit` | `number`                 | `20`        | 사용자 상호작용 스팬에서 요소 이름의 최대 길이.         |
| `getOverriddenServiceName`        | `(span: Span) => string` | `undefined` | 특정 스팬에 대해 서비스 이름을 재정의하는 함수.         |

### 사용 예시

```javascript
initialize({
  collectionSourceUrl: 'https://collector.imqa.io',
  serviceName: 'my-web-app',
  applicationName: 'MyApp',
  deploymentEnvironment: 'production',
  samplingProbability: 1,
  ignoreUrls: [/^https:\/\/analytics\.imqa\.io/],
  collectErrors: true
});
```

이 예제 설정은 IMQA agent를'https://collector.imqa.io' 로 데이터를 보내도록 설정하고, 서비스와 애플리케이션을 식별하며, 배포 환경을 프로덕션으로 설정하고, 100%의 트레이스를 샘플링하며, 주어진 패턴과 일치하는 URL을 무시하고, 오류 수집을 활성화합니다.
